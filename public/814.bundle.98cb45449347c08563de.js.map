{"version":3,"file":"814.bundle.98cb45449347c08563de.js","mappings":"uIAEMA,E,iDAAKC,GACLC,EAAqB,GAAEF,oC,eCA7B,MAAM,SAAEG,GAAaC,EAAAA,QAMfC,EAAeC,OAAOC,OAJL,CACrBC,iBAAkB,kC,oOCFpB,MAAMC,EAAYC,EAAAA,MAAW,IACpB,iCAGHC,EAA6BC,GAE/BF,EAAAA,cAACA,EAAAA,SAAc,CAACG,SAAUH,EAAAA,cAAA,WAAK,eAC7BA,EAAAA,cAACD,EAAcG,IA+CrB,EAvC0B,CAIxBZ,GAAE,EAOFc,iBAAAA,CAAiBC,GAAwC,IAAvC,gBAAEC,EAAe,iBAAEC,GAAkBF,EAWrD,MAAO,CAAC,CAAEG,KAAM,YAAaC,UAVcP,GAEvCF,EAAAA,cAACC,EAA0BS,EAAA,CACzBJ,gBAAiBA,EACjBC,iBAAkBA,GACdL,KAMZ,EAaAS,yBDEa,SAAiCN,GAAwC,IAAvC,gBAAEC,EAAe,iBAAEC,GAAkBF,EAKpF,MAAO,CACL,CACEG,KAAM,YACNb,eACAiB,yBAR6BC,GA/CDC,EAACD,EAAWP,EAAiBC,KAC7D,MAAMQ,EAAaR,EAAiBS,sBAAsB,GAC1D,OAAOH,EAAUI,KAAIC,IACnB,MAAM,SAAEC,EAAQ,eAAEC,EAAc,qBAAEC,GAAyBH,GACrD,kBAAEI,EAAoB,MAAK,+BAAEC,GAAmCL,GAChE,aAAEM,EAAY,WAAEC,EAAU,kBAAEC,EAAiB,iBAAEC,EAAgB,YAAEC,GAAgBV,EACjFW,EAASd,EAAWe,SAASC,UAAU,CAC3Cb,WACAc,IAAK,uBACLC,YAAaV,GAAkC,kBAC/CW,WAAY,QAgCd,MA7BmB,CAEjBf,WACAgB,sBAAuBC,EAAAA,MAAMC,OAC7Bf,oBACAE,eACAC,aACAL,iBACAM,oBACAC,mBACAnC,kBAAiB,EACjBoC,cACAU,iBAAkB,KAClBC,aAAc,KACdV,SACAhB,UAAW,CAACK,GACZsB,aAAczB,EAAWe,SAASC,UAAU,CAC1Cb,WACAuB,YAAa,aACbR,YAAa,aACbD,IAAK,WAEPU,qBAAqB,EACrBC,UAAU,EACVhD,eACAiD,eAAgB,EAChBC,aAAc,EACd3B,WAEe,GACjB,EAKOJ,CAA0BD,EAAWP,EAAiBC,IAUjE,E","sources":["webpack:///../../../extensions/dicom-pdf/src/id.js","webpack:///../../../extensions/dicom-pdf/src/getSopClassHandlerModule.js","webpack:///../../../extensions/dicom-pdf/src/index.tsx"],"sourcesContent":["import packageJson from '../package.json';\r\n\r\nconst id = packageJson.name;\r\nconst SOPClassHandlerId = `${id}.sopClassHandlerModule.dicom-pdf`;\r\n\r\nexport { id, SOPClassHandlerId };\r\n","import { SOPClassHandlerId } from './id';\r\nimport { utils, classes } from '@ohif/core';\r\n\r\nconst { ImageSet } = classes;\r\n\r\nconst SOP_CLASS_UIDS = {\r\n  ENCAPSULATED_PDF: '1.2.840.10008.5.1.4.1.1.104.1',\r\n};\r\n\r\nconst sopClassUids = Object.values(SOP_CLASS_UIDS);\r\n\r\nconst _getDisplaySetsFromSeries = (instances, servicesManager, extensionManager) => {\r\n  const dataSource = extensionManager.getActiveDataSource()[0];\r\n  return instances.map(instance => {\r\n    const { Modality, SOPInstanceUID, EncapsulatedDocument } = instance;\r\n    const { SeriesDescription = 'PDF', MIMETypeOfEncapsulatedDocument } = instance;\r\n    const { SeriesNumber, SeriesDate, SeriesInstanceUID, StudyInstanceUID, SOPClassUID } = instance;\r\n    const pdfUrl = dataSource.retrieve.directURL({\r\n      instance,\r\n      tag: 'EncapsulatedDocument',\r\n      defaultType: MIMETypeOfEncapsulatedDocument || 'application/pdf',\r\n      singlepart: 'pdf',\r\n    });\r\n\r\n    const displaySet = {\r\n      //plugin: id,\r\n      Modality,\r\n      displaySetInstanceUID: utils.guid(),\r\n      SeriesDescription,\r\n      SeriesNumber,\r\n      SeriesDate,\r\n      SOPInstanceUID,\r\n      SeriesInstanceUID,\r\n      StudyInstanceUID,\r\n      SOPClassHandlerId,\r\n      SOPClassUID,\r\n      referencedImages: null,\r\n      measurements: null,\r\n      pdfUrl,\r\n      instances: [instance],\r\n      thumbnailSrc: dataSource.retrieve.directURL({\r\n        instance,\r\n        defaultPath: '/thumbnail',\r\n        defaultType: 'image/jpeg',\r\n        tag: 'Absent',\r\n      }),\r\n      isDerivedDisplaySet: true,\r\n      isLoaded: false,\r\n      sopClassUids,\r\n      numImageFrames: 0,\r\n      numInstances: 1,\r\n      instance,\r\n    };\r\n    return displaySet;\r\n  });\r\n};\r\n\r\nexport default function getSopClassHandlerModule({ servicesManager, extensionManager }) {\r\n  const getDisplaySetsFromSeries = instances => {\r\n    return _getDisplaySetsFromSeries(instances, servicesManager, extensionManager);\r\n  };\r\n\r\n  return [\r\n    {\r\n      name: 'dicom-pdf',\r\n      sopClassUids,\r\n      getDisplaySetsFromSeries,\r\n    },\r\n  ];\r\n}\r\n","import React from 'react';\r\nimport getSopClassHandlerModule from './getSopClassHandlerModule';\r\nimport { id } from './id.js';\r\n\r\nconst Component = React.lazy(() => {\r\n  return import(/* webpackPrefetch: true */ './viewports/OHIFCornerstonePdfViewport');\r\n});\r\n\r\nconst OHIFCornerstonePdfViewport = props => {\r\n  return (\r\n    <React.Suspense fallback={<div>Loading...</div>}>\r\n      <Component {...props} />\r\n    </React.Suspense>\r\n  );\r\n};\r\n\r\n/**\r\n *\r\n */\r\nconst dicomPDFExtension = {\r\n  /**\r\n   * Only required property. Should be a unique value across all extensions.\r\n   */\r\n  id,\r\n  /**\r\n   *\r\n   *\r\n   * @param {object} [configuration={}]\r\n   * @param {object|array} [configuration.csToolsConfig] - Passed directly to `initCornerstoneTools`\r\n   */\r\n  getViewportModule({ servicesManager, extensionManager }) {\r\n    const ExtendedOHIFCornerstonePdfViewport = props => {\r\n      return (\r\n        <OHIFCornerstonePdfViewport\r\n          servicesManager={servicesManager}\r\n          extensionManager={extensionManager}\r\n          {...props}\r\n        />\r\n      );\r\n    };\r\n\r\n    return [{ name: 'dicom-pdf', component: ExtendedOHIFCornerstonePdfViewport }];\r\n  },\r\n  // getCommandsModule({ servicesManager }) {\r\n  //   return {\r\n  //     definitions: {\r\n  //       setToolActive: {\r\n  //         commandFn: () => null,\r\n  //         storeContexts: [],\r\n  //         options: {},\r\n  //       },\r\n  //     },\r\n  //     defaultContext: 'ACTIVE_VIEWPORT::PDF',\r\n  // };\r\n  // },\r\n  getSopClassHandlerModule,\r\n};\r\n\r\nexport default dicomPDFExtension;\r\n"],"names":["id","packageJson","SOPClassHandlerId","ImageSet","classes","sopClassUids","Object","values","ENCAPSULATED_PDF","Component","React","OHIFCornerstonePdfViewport","props","fallback","getViewportModule","_ref","servicesManager","extensionManager","name","component","_extends","getSopClassHandlerModule","getDisplaySetsFromSeries","instances","_getDisplaySetsFromSeries","dataSource","getActiveDataSource","map","instance","Modality","SOPInstanceUID","EncapsulatedDocument","SeriesDescription","MIMETypeOfEncapsulatedDocument","SeriesNumber","SeriesDate","SeriesInstanceUID","StudyInstanceUID","SOPClassUID","pdfUrl","retrieve","directURL","tag","defaultType","singlepart","displaySetInstanceUID","utils","guid","referencedImages","measurements","thumbnailSrc","defaultPath","isDerivedDisplaySet","isLoaded","numImageFrames","numInstances"],"sourceRoot":""}